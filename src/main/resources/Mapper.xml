<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="Mapper">
 
  	<select id="test01" resultType="Pack.UserDTO">
 		select userPwd from user where userID=#{userID} and userPwd=#{userPwd}
 	</select>
 	
   	<select id="test02" resultType="String">
 		select * from user where userID=#{userID}
 	</select>

	<insert id="test03" parameterType="Pack.UserDTO">
		insert into user(userID, userPwd, userName, userAge, userPhone, userAddress)
		 values (#{userID}, #{userPwd}, #{userName}, #{userAge}, #{userPhone}, #{userAddress})
	</insert>
	
	<select id="test04" resultType="Pack.UserDTO">
		select * from user where userID != 'admin'
	</select>
	
	<select id="test05" resultType="Pack.BookDTO" parameterType="String">
		select * from book where bookWriter like CONCAT('%',#{keyword},'%')
	</select>
	
	<select id="test06" resultType="Pack.BookDTO" parameterType="String">
		select * from book where bookName like CONCAT('%',#{keyword},'%')
	</select>
	
	<select id="test07" resultType="Pack.BookDTO" parameterType="String">
		select * from book where bookPublisher like CONCAT('%',#{keyword},'%')
	</select>
	
		<select id="test08" resultType="Pack.RentalDTO" parameterType="String">
		select * from rental where userID=#{userID} and rentalKey!=1
	</select>	
	
	<select id="test09" resultType="Pack.RentalDTO" parameterType="String">
		select b.*, r.* from book b join rental r on b.bookName = r.rentalBookName where userID=#{userID} and rentalKey=1;
	</select>
		
	<select id="test10" resultType="Pack.BookDTO" parameterType="String">
		select b.*, r.* from book b join rental r on b.bookName = r.rentalBookName where userID=#{userID} and rentalKey=1;
	</select>	
	
	<select id="userData" resultType="Pack.UserDTO">
		select * from user where userID=#{userID}
	</select>
	
	<update id="userUpdate" parameterType="Pack.UserDTO">
		update user set
		userPwd = #{userPwd},
		userName = #{userName},
		userAge = #{userAge},
		userPhone = #{userPhone},
		userAddress =#{userAddress} 
		where userID=#{userID}
	</update>
	
	<delete id="userDelete" parameterType="Pack.UserDTO">
		delete from user where userID=#{userID}
	</delete>
	

</mapper>